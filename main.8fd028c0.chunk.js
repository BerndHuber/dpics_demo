(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,a,t){e.exports=t(21)},17:function(e,a,t){},19:function(e,a,t){e.exports=t.p+"static/media/logo.5d5d9eef.svg"},20:function(e,a,t){},21:function(e,a,t){"use strict";t.r(a);var l,n=t(0),s=t.n(n),i=t(4),c=t.n(i),o=(t(17),t(2)),r=t.n(o),d=t(5),m=t(6),u=t(7),p=t(9),v=t(8),h=t(1),b=t(10);t(19),t(20);var f=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(p.a)(this,Object(v.a)(a).call(this,e))).uploadFlagToServer=function(e,a,t,l){return function(n){if(console.log("uploadFlagToServer"),1!=t||!l.state.flagged_sentences.includes(e)){var s=l.state.flagged_sentences;s.push(e),l.setState({flagged_sentences:s});var i="https://script.google.com/macros/s/AKfycbwK3EEp-8NU7wLEXLrZesp7XcjUYh7H6zdgQj7vBfDpDlwa13gl/exec?";i+="timest="+(new Date).getTime(),i+="&sentence="+e,i+="&bd="+a[0],i+="&cmd="+a[1],i+="&lp="+a[2],i+="&nt="+a[3],i+="&neutral="+a[4],i+="&qu="+a[5],i+="&rf="+a[6],i+="&up="+a[7],i+="&flagged="+t,console.log("uploading data"),fetch(i).then(function(e){return e.text()}).then(function(e){console.log("response: "),console.log(e)}).catch(function(e){console.log(e)})}}},t.classifyText=function(){return function(e){var a=Object(h.a)(t);console.log(document.getElementById("classify-new-text-input").value);var n=document.getElementById("classify-new-text-input").value;l.classify([n]).then(function(e){console.log(e);for(var t=[],l=[],s=0,i=1,c=0;c<8;c++)e[c].results[0].probabilities[0]<i&&(s=c,i=e[c].results[0].probabilities[0]),console.log(e[c].results[0].probabilities[0]),e[c].results[0].probabilities[0]>.9?t.push(1):t.push(0),l.push(e[c].results[0].probabilities[0]);(t=[0,0,0,0,0,0,0,0])[s]=1,function(e,a){var t="https://script.google.com/macros/s/AKfycbwK3EEp-8NU7wLEXLrZesp7XcjUYh7H6zdgQj7vBfDpDlwa13gl/exec?";t+="timest="+(new Date).getTime(),t+="&sentence="+e,t+="&bd="+a[0],t+="&cmd="+a[1],t+="&lp="+a[2],t+="&nt="+a[3],t+="&neutral="+a[4],t+="&qu="+a[5],t+="&rf="+a[6],t+="&up="+a[7],console.log("uploading data"),fetch(t).then(function(e){return e.text()}).then(function(e){console.log("response: "),console.log(e)}).catch(function(e){console.log(e)})}(n,l),console.log(t);var o=a.state.sentences;return o.unshift({text:n,pred:t,proba:l}),a.setState({sentence:o}),!0})}},t.state={participantid:Date.now(),sentences:[{text:"What are you doing?",pred:[0,0,0,0,0,1,0,0],proba:[1,1,1,1,1,0,1,1]}],flagged_sentences:[]},t}return Object(b.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(d.a)(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:.7,a=["unlabelled_praise","command","neutral_talk","labelled_praise","question","behavior_description","reflection","negative_talk"],window.toxicity.load(.7,a).then(function(e){l=e});case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"main"},s.a.createElement("h1",null,"DPICS coding demo"),s.a.createElement("div",{className:"description"},"This is a demo of the text classification model that codes parent-child interaction according to the DPICS. The samples below illustrate the coding output of the model."),s.a.createElement("p",null,"Enter your sentence below and click 'Code' to code it according to the DPICS."),s.a.createElement("div",null,s.a.createElement("input",{id:"classify-new-text-input",placeholder:"i.e. 'Come play with me'"}),s.a.createElement("div",{id:"classify-new-text",onClick:this.classifyText()},"Code")),s.a.createElement("div",{id:"table-wrapper"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"text"},"Parent Sentence"),s.a.createElement("div",{className:"label"},"Behavior Description"),s.a.createElement("div",{className:"label"},"Command"),s.a.createElement("div",{className:"label"},"Labeled Praise"),s.a.createElement("div",{className:"label"},"Negative Talk"),s.a.createElement("div",{className:"label"},"Neutral Talk"),s.a.createElement("div",{className:"label"},"Question"),s.a.createElement("div",{className:"label"},"Reflection"),s.a.createElement("div",{className:"label"},"Unlabeled Praise"),s.a.createElement("div",{className:"label"},"Wrong code?")),this.state.sentences.map(function(a,t){return s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"text"},a.text),1==a.pred[0]?s.a.createElement("div",{className:"label positive"},"Likely"):s.a.createElement("div",{className:"label"},"Unlikely"),1==a.pred[1]?s.a.createElement("div",{className:"label positive"},"Likely"):s.a.createElement("div",{className:"label"},"Unlikely"),1==a.pred[2]?s.a.createElement("div",{className:"label positive"},"Likely"):s.a.createElement("div",{className:"label"},"Unlikely"),1==a.pred[3]?s.a.createElement("div",{className:"label positive"},"Likely"):s.a.createElement("div",{className:"label"},"Unlikely"),1==a.pred[4]?s.a.createElement("div",{className:"label positive"},"Likely"):s.a.createElement("div",{className:"label"},"Unlikely"),1==a.pred[5]?s.a.createElement("div",{className:"label positive"},"Likely"):s.a.createElement("div",{className:"label"},"Unlikely"),1==a.pred[6]?s.a.createElement("div",{className:"label positive"},"Likely"):s.a.createElement("div",{className:"label"},"Unlikely"),1==a.pred[7]?s.a.createElement("div",{className:"label positive"},"Likely"):s.a.createElement("div",{className:"label"},"Unlikely"),s.a.createElement("div",{className:"label"},s.a.createElement("div",{className:"flag-btn",onClick:e.uploadFlagToServer(a.text,a.proba,1,e)},"Flag this")))})),s.a.createElement("h2",null,"The related paper is published at PervasiveHealth 2019:"),s.a.createElement("p",null,"We studied this coding tool as a system to help parents communicate. Make sure to check out our ",s.a.createElement("a",{href:"https://scholar.harvard.edu/files/bhb/files/specialtime_final_pervasivehealth19.pdf"},"paper")," for more details."),s.a.createElement("p",null,"Created by: ",s.a.createElement("a",{href:"https://scholar.harvard.edu/bhb"},"Bernd Huber")))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[11,1,2]]]);
//# sourceMappingURL=main.8fd028c0.chunk.js.map